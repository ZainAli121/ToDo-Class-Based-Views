{% extends 'todo/main.html' %}
{% block content %}

{% if request.user.is_authenticated %}
    <h3><p>Welcome {{request.user.username}}</p></h3>
    <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit">Logout</button>
    </form>
    
{% else %}
    <a href="{% url 'login' %}">Login</a>

{% endif %}

<form action="" method="get">
    <input type="text" name="search" placeholder="Search..." value="{{search_input}}">
    <input type="submit" value="Search">
</form>

<h1>ToDo</h1>
<a href="{% url 'create-task' %}">Add Task</a>
<table>
    <thead>
        <tr>
            <th>Task</th>
            <th></th>
        </tr>

        {% for task in tasks %}
        <tr>
            <td>{{task.title}}</td>
            <td><a href="{% url 'task' task.id %}">View</td></a>
            <td><a href="{% url 'update-task' task.id %}">Edit</td></a>
            <td><a href="{% url 'delete-task' task.id %}">Delete</td></a>
        </tr>
        {% endfor %}
    </thead>
</table> 

{% endblock %}